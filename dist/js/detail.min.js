"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}var Slide=function(){function t(){_classCallCheck(this,t),this.span=document.querySelectorAll(".small span"),this.big_img=document.querySelectorAll(".img img"),this.big_pic=document.querySelectorAll(".Pic img"),this.small_img=document.querySelectorAll(".small-slide img"),this.big_num=this.big_img.length,this.z_index=0,this.index=0,this.float=document.querySelector(".float_lawer"),this.mark=document.querySelector(".mark"),this.big_box=document.querySelector(".Pic"),this.addEvt(),this.slide(),this.magnifying()}return _createClass(t,[{key:"addEvt",value:function(){var e=this;this.span[0].onclick=function(){this.index--,-1===this.index&&(this.index=this.big_num-1),this.magnifying(),this.slide()}.bind(this),this.span[1].onclick=function(){this.index++,this.index===this.big_num&&(this.index=0),this.magnifying(),this.slide()}.bind(this);for(var t=0;t<this.big_num;t++)!function(t){e.small_img[t].onmouseenter=function(){this.index=t,this.magnifying(),this.slide()}.bind(e)}(t)}},{key:"slide",value:function(){this.big_img[this.index].style.zIndex=++this.z_index,this.big_pic[this.index].style.zIndex=++this.z_index;for(var t=0;t<this.big_num;t++)this.small_img[t].style.border="none",this.small_img[this.index].style.border="1px solid #111"}},{key:"magnifying",value:function(){var i=this.big_pic[this.index];this.mark.onmouseenter=function(){this.float.style.display="block",this.big_box.style.display="block"}.bind(this),this.mark.onmouseout=function(){this.float.style.display="none",this.big_box.style.display="none"}.bind(this),this.mark.onmousemove=function(t){var e=t||window.event,t=e.offsetX-this.float.offsetWidth/2,e=e.offsetY-this.float.offsetHeight/2;t<=0?t=0:t>=this.mark.offsetWidth-this.float.offsetWidth&&(t=this.mark.offsetWidth-this.float.offsetWidth),e<=0?e=0:e>=this.mark.offsetHeight-this.float.offsetHeight&&(e=this.mark.offsetHeight-this.float.offsetHeight),this.float.style.left=t+"px",this.float.style.top=e+"px";t/=this.mark.offsetWidth-this.float.offsetWidth,e/=this.mark.offsetHeight-this.float.offsetHeight;i.style.left=-(i.offsetWidth-this.big_box.offsetWidth)*t+"px",i.style.top=-(i.offsetHeight-this.big_box.offsetHeight)*e+"px"}.bind(this)}}]),t}(),Tab=function(){function t(){_classCallCheck(this,t),this.li=document.querySelectorAll(".ul-label li"),this.product_detail=document.querySelector(".product-detail"),this.conmment=document.querySelector(".comment"),this.addEvt()}return _createClass(t,[{key:"addEvt",value:function(){var t=this;console.log(t.li.length),this.li[1].onclick=function(){this.style.color=" #111111",this.style.borderBottom=" 2px solid black",t.li[0].style.color="rgb(103, 95, 95)",t.li[0].style.borderBottom=" 2px solid transparent",t.conmment.style.display="block",t.product_detail.style.display="none"},this.li[0].onclick=function(){this.style.color=" #111111",this.style.borderBottom="2px solid black",t.li[1].style.color="rgb(103, 95, 95)",t.li[1].style.borderBottom="2px solid transparent",t.product_detail.style.display="block",t.conmment.style.display="none"}}}]),t}(),Product=function(){function t(){_classCallCheck(this,t),this.cart_btn=document.querySelectorAll(".button-wrap .wrap-buy"),this.num_btn=document.querySelectorAll(".change span"),this.test=document.querySelector(".change input"),this.addEvt(),this.init()}return _createClass(t,[{key:"init",value:function(){var t=window.localStorage,e=document.querySelector(".product-intro").getAttribute("data-good-id"),t=t.getItem("carts")?t.getItem("carts"):"",t=this.covertstrTOobj(t);e in t?this.test.value=t[e].num:this.test.value=1}},{key:"addEvt",value:function(){var c=this;console.log(this.num_btn.length),this.cart_btn[1].onclick=function(){var t=document.querySelector(".product-intro").getAttribute("data-good-id"),e=document.querySelectorAll(".intro-left .img img")[0].src,i=document.querySelector(".product-name").innerText,o=document.querySelector(".product-color span").innerText,n=document.querySelector(".product-size span").innerText,s=document.querySelector(".product-price").children[1].innerText;console.log(n),console.log(i),console.log(o);var r=window.localStorage,l=r.getItem("carts")?r.getItem("carts"):"",l=c.covertstrTOobj(l);t in l?l[t].num++:l[t]={src:e,name:i,color:o,size:n,price:s,num:1},r.setItem("carts",JSON.stringify(l)),c.init()},this.num_btn[1].onclick=function(){var t=document.querySelector(".product-intro").getAttribute("data-good-id"),e=document.querySelectorAll(".intro-left .img img")[0].src,i=document.querySelector(".product-name").innerText,o=document.querySelector(".product-color span").innerText,n=document.querySelector(".product-size span").innerText,s=document.querySelector(".product-price").children[1].innerText,r=window.localStorage,l=r.getItem("carts")?r.getItem("carts"):"",l=c.covertstrTOobj(l);c.test.value++,t in l?l[t].num++:l[t]={src:e,name:i,color:o,size:n,price:s,num:1},r.setItem("carts",JSON.stringify(l))},this.num_btn[0].onclick=function(){var t=document.querySelector(".product-intro").getAttribute("data-good-id"),e=document.querySelectorAll(".intro-left .img img")[0].src,i=document.querySelector(".product-name").innerText,o=document.querySelector(".product-color span").innerText,n=document.querySelector(".product-size span").innerText,s=document.querySelector(".product-price").children[1].innerText,r=window.localStorage,l=r.getItem("carts")?r.getItem("carts"):"",l=c.covertstrTOobj(l);c.test.value--,Number(c.test.value)<=1&&(c.test.value="1"),t in l?(l[t].num--,l[t].num<2&&(l[t].num=1)):l[t]={src:e,name:i,color:o,size:n,price:s,num:1},r.setItem("carts",JSON.stringify(l))}}},{key:"covertstrTOobj",value:function(t){return t?JSON.parse(t):{}}}]),t}();new Slide,new Tab,new Product;